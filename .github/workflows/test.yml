name: Test workflow
on: [workflow_dispatch]

jobs:
  test-job:
    runs-on: ubuntu-latest
    name: Test job
    steps:
      - name: Checkout
        uses: actions/checkout@v3

      - name: ntfy-action test step
        uses: ./
        with:
          url: ${{ secrets.NTFY_URL }}
          topic: ${{ secrets.NTFY_TOPIC }}
          icon: 'https://github.githubassets.com/images/modules/profile/achievements/starstruck-default.png'
          default: '{"title": "The default title", "message": "The default message"}'
          on_failure: '{"title": "A failure title", "message": "The failure message"}'
          job_status: ${{ job.status }}

      - name: ntfy-action test step
        uses: ./
        with:
          url: ${{ secrets.NTFY_URL }}
          topic: ${{ secrets.NTFY_TOPIC }}
          icon: 'https://github.githubassets.com/images/modules/profile/achievements/starstruck-default.png'
          default: '{"title": "The default title", "message": "The default message"}'
          on_failure: '{"title": "A failure title", "message": "The failure message"}'
          job_status: 'failure'